<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Presently Attendance - Login / Sign Up</title>
  <link rel="stylesheet" href="login.css">
</head>
<body>
  <div class="container">
    <div class="flip-card">
      <div class="flip-card-inner" id="card">
        
        <div class="flip-card-front">
          <div class="form-box">
            <img src="https://i.pinimg.com/736x/f9/52/c1/f952c1fb0948072af6e3cd3dedf38249.jpg" 
                 alt="Presently Logo" class="logo">
            <h2>Login</h2>
            <form id="loginForm" action="login.php" method="POST">
              <select id="loginRole" name="loginRole" required>
                <option value="" disabled selected>Select Role</option>
                <option value="lecturer">Lecturer</option>
                <option value="student">Student</option>
              </select>
              <input type="email" id="loginEmail" name="loginEmail" placeholder="Email" required>
              <input type="password" id="loginPassword" name="loginPassword" placeholder="Password" required>
              <div class="error-message" id="loginError"></div>
              <button type="submit">Login</button>
              <p class="link" id="forgotLink">Forgot Password?</p>
              <p class="link" id="toSignup">Don't have an account? Sign Up</p>
            </form>
          </div>
        </div>

        <div class="flip-card-back">
          <div class="form-box">
            <img src="https://i.pinimg.com/736x/f9/52/c1/f952c1fb0948072af6e3cd3dedf38249.jpg" 
                 alt="Presently Logo" class="logo">
            <h2>Sign Up</h2>
            <form id="signupForm" action="signUp.php" method="POST">
              <select id="signupRole" name="signupRole" required>
                <option value="" disabled selected>Select Role</option>
                <option value="lecturer">Lecturer</option>
                <option value="student">Student</option>
              </select>
              <input type ="identification" id="number" name="number" placeholder="student number /lecturer number"required>
              <input type="email" id="signupEmail" name="signupEmail" placeholder="Email" required>
              <input type="password" id="signupPassword" name="signupPassword" placeholder="Password" required>
              <div class="error-message" id="signupError"></div>
              <div class="success-message" id="signupSuccess"></div>
              <button type="submit">Sign Up</button>
              <p class="link" id="toLogin">Already have an account? Login</p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

 <script src="login.js"></script>
  
  <script>
    
    window.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const errorParam = urlParams.get('error');
      const successParam = urlParams.get('success');
      
      console.log('Checking for messages...'); 
      console.log('Error parameter:', errorParam); 
      console.log('Success parameter:', successParam); 
      
      if (errorParam === 'invalid') {
        const loginError = document.getElementById('loginError');
        if (loginError) {
          loginError.textContent = 'Invalid email or password. Please try again.';
          loginError.style.display = 'block';
          console.log('Login error message displayed!');
        }
      }
      
      if (errorParam === 'email_exists') {
        const signupError = document.getElementById('signupError');
        if (signupError) {
          signupError.textContent = 'This email is already registered. Please login instead.';
          signupError.style.display = 'block';
          console.log('Signup error message displayed!');
          
          document.getElementById('card').style.transform = 'rotateY(180deg)';
        }
      }
      
      if (errorParam === 'number_exists') {
        const signupError = document.getElementById('signupError');
        if (signupError) {
          signupError.textContent = 'This student/lecturer number is already registered.';
          signupError.style.display = 'block';
          console.log('Signup error message displayed!');
          
          document.getElementById('card').style.transform = 'rotateY(180deg)';
        }
      }
      
      if (errorParam === 'signup_failed') {
        const signupError = document.getElementById('signupError');
        if (signupError) {
          signupError.textContent = 'Registration failed. Please try again.';
          signupError.style.display = 'block';
          console.log('Signup error message displayed!');
          
          document.getElementById('card').style.transform = 'rotateY(180deg)';
        }
      }
      
      if (successParam === 'registered') {
        const signupSuccess = document.getElementById('signupSuccess');
        if (signupSuccess) {
          signupSuccess.textContent = 'Registration successful! Please login with your credentials.';
          signupSuccess.style.display = 'block';
          console.log('Signup success message displayed!');
         
        }
      }
      
      if (errorParam || successParam) {
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    });
  </script>

</body>
  
</body>
</html>




